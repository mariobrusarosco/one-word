datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

generator client {
  provider = "prisma-client-js"
}

model Member {
  id                      String @id @default(uuid())
  userId                  String @unique
  firstName               String
  tablesAsAdmin           Table[] @relation("table_admin")
  tablesAsParticipant     Table[] @relation("participants")
}

model Table {
  id                    String @id @default(uuid())
  name                  String
  inviteCode            String @unique

  memberAdminId         String
  memberAdmin           Member   @relation("table_admin", fields: [memberAdminId], references: [userId], onDelete: Cascade)
  participants          Member[] @relation("participants")

  @@index([memberAdminId])
}
